<div class="flex flex-col h-[100dvh] bg-white relative">
  <header class="p-4 flex items-center gap-4">
    <button routerLink="/resumen" class="text-gray-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18">
        </path>
      </svg>
    </button>
    <h1 class="font-bold text-xl text-gray-800">Pago en QR</h1>
  </header>

  <div class="flex-1 flex flex-col items-center justify-center p-8 text-center">

    <div class="bg-white p-2">
      <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/QR_code_for_mobile_English_Wikipedia.svg"
        alt="QR Pago" class="w-64 h-64 object-contain">
    </div>

    <div class="w-full max-w-xs mt-6 space-y-2">
      
      <div class="flex justify-between text-sm text-gray-700">
        <span>Subtotal (Comida)</span>
        <span class="font-medium">Bs {{ carritoService.totalPagar().toFixed(2) }}</span>
      </div>

      <div class="flex justify-between text-sm text-gray-700">
        <span>Costo de Delivery</span>
        <span class="font-medium">Bs {{ precioDelivery.toFixed(2) }}</span>
      </div>

      <hr class="border-t border-gray-300">

      <h2 class="flex justify-between text-xl font-bold text-gray-800">
        <span>Total a Pagar</span>
        <span>Bs {{ totalFinalMostrado().toFixed(2) }}</span>
      </h2>
    </div>
    <p class="text-gray-500 mt-2 text-sm">Escanea para completar tu compra</p>

  </div>

  <div class="p-4 border-t border-gray-100">
    <div *ngIf="!deliveryDisponible" class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-3 text-center">
      <p class="text-yellow-800 text-sm font-medium">⚠️ No hay repartidores disponibles</p>
      <button (click)="reintentar()" class="mt-2 text-blue-600 text-sm font-semibold underline">
        Reintentar
      </button>
    </div>
    
    <button (click)="procesarPedido()"
      [disabled]="!deliveryDisponible"
      [class.opacity-50]="!deliveryDisponible"
      [class.cursor-not-allowed]="!deliveryDisponible"
      class="w-full bg-brand-green text-white font-bold py-3 rounded-xl shadow-lg transition transform active:scale-95 disabled:active:scale-100">
      Verificar Pago y Enviar
    </button>
  </div>
</div>