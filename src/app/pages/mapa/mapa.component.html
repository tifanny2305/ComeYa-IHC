<div class="flex flex-col h-[100dvh] relative font-sans">
  
  <div class="absolute top-0 left-0 right-0 z-[1000] p-4 flex justify-center pointer-events-none">
    <div class="bg-white/95 backdrop-blur-md rounded-2xl shadow-xl w-full max-w-md pointer-events-auto border border-gray-100 overflow-hidden">
      
      <div class="p-4 pb-2 flex items-center gap-3">
        <div class="bg-blue-50 p-2.5 rounded-full text-blue-600 shrink-0">
           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
             <path fill-rule="evenodd" d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
           </svg>
        </div>
        <div>
          <h1 class="font-bold text-gray-800 text-lg leading-tight">¿Dónde entregamos?</h1>
          <p class="text-xs text-gray-500">Usa el GPS o busca tu calle</p>
        </div>
      </div>

      <div class="px-4 pb-4">
        <div class="relative flex items-center">
          
          <input 
            #txtBuscar
            (keydown.enter)="buscarDireccion(txtBuscar.value)"
            [disabled]="cargando"
            type="text" 
            placeholder="Buscar calle..." 
            class="w-full bg-gray-50 text-gray-700 text-sm py-3 pl-4 pr-24 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
          >
          
          <div class="absolute right-2 flex items-center gap-1">
            
            <button 
              (click)="usarUbicacionActual()"
              title="Usar mi ubicación actual"
              class="p-2 rounded-lg text-gray-400 hover:text-blue-600 hover:bg-blue-100 transition-colors"
              [class.animate-pulse]="cargando"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
              </svg>
            </button>

            <div class="h-6 w-px bg-gray-300"></div>

            <button 
              (click)="buscarDireccion(txtBuscar.value)"
              class="p-2 rounded-lg text-gray-400 hover:text-blue-600 hover:bg-blue-100 transition-colors">
              
              <svg *ngIf="!cargando" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>

              <svg *ngIf="cargando" class="animate-spin w-5 h-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
            </button>

          </div>
        </div>
      </div>
      
    </div>
  </div>

  <div id="map" class="w-full h-full z-0 bg-gray-200"></div>

  <div class="absolute bottom-6 left-0 right-0 z-[1000] px-6 flex justify-center pointer-events-none">
    <button (click)="confirmarUbicacion()" class="w-full max-w-md bg-brand-green hover:bg-green-600 text-white font-bold py-4 rounded-2xl shadow-lg shadow-green-900/20 pointer-events-auto transform active:scale-95 transition-all flex justify-center items-center gap-2">
      <span>Confirmar Ubicación</span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
      </svg>
    </button>
  </div>
</div>